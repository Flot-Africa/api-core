#####################################################################
# CONFIGURATION COMMUNE
#####################################################################

##################################
# Locale par défaut
##################################
quarkus.default-locale=fr-FR

##################################
# Logging commun
##################################
# Niveau de logs global
quarkus.log.level=INFO

# Exemple de catégories de logs
quarkus.log.category."io.quarkus".level=WARN
quarkus.log.category."io.quarkus.config".level=DEBUG

# Logging vers fichier
quarkus.log.file.enable=true
quarkus.log.file.path=storage/logs/flot.log
quarkus.log.file.rotation.rotate-at=00:00:01
quarkus.log.file.rotation.suffix=.yyyy-MM-dd.log
quarkus.log.file.rotation.rotate-on-boot=true
quarkus.log.file.rotation.max-file-size=10M
quarkus.log.file.rotation.max-backup-index=5

# Danaya logging (fichier supplémentaire)
quarkus.log.handler.file."DANAYA_FILE".enable=true
quarkus.log.handler.file."DANAYA_FILE".path=storage/logs/danaya.log
quarkus.log.handler.file."DANAYA_FILE".format=[%d{yyyy-MM-dd HH:mm:ss.SSS}] %p: %m%n
quarkus.log.category."africa.flot.infrastructure.dayana".handlers=DANAYA_FILE

##################################
# Configuration Micrometer (Metrics)
##################################
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/metrics
quarkus.micrometer.export.prometheus.port=9100
quarkus.micrometer.binder.http-client.enabled=true
quarkus.micrometer.binder.http-server.enabled=true
quarkus.micrometer.binder.jvm=true
quarkus.micrometer.binder.system=true

##################################
# Configuration RESTEasy Reactive
##################################
quarkus.resteasy-reactive.path=/v1

##################################
# JWT (Auth) Configuration
##################################
mp.jwt.verify.issuer=${JWT_ISSUER}
mp.jwt.verify.publickey.location=${JWT_PUBLIC_KEY_PATH}
smallrye.jwt.sign.key.location=${JWT_PRIVATE_KEY_PATH}

##################################
# Auth Admin Key
##################################
auth.admin.key=${AUTH_ADMIN_KEY}

##################################
# Version de l'application
##################################
version=${VERSION}

#####################################################################
# CONFIGURATION DEV
#####################################################################
%dev.quarkus.log.level=DEBUG
%dev.quarkus.log.category."io.quarkus.hibernate.reactive".level=DEBUG
%dev.quarkus.log.category."org.hibernate.SQL".level=DEBUG
%dev.quarkus.log.category."org.hibernate.type.descriptor.sql.BasicBinder".level=TRACE
%dev.quarkus.log.category."io.micrometer".level=DEBUG

# Ex. Base de données (en dev)
%dev.quarkus.datasource.reactive.url=vertx-reactive:postgresql://localhost:5432/dev_db
%dev.quarkus.datasource.username=dev_user
%dev.quarkus.datasource.password=dev_pass
%dev.quarkus.hibernate-orm.packages=africa.flot.domain.model
%dev.quarkus.hibernate-orm.database.generation=drop-and-create
%dev.quarkus.hibernate-orm.log.sql=true
%dev.quarkus.hibernate-orm.log.bind-parameters=true
%dev.quarkus.hibernate-orm.statistics=true

# Redis (en dev)
%dev.quarkus.redis.hosts=redis://localhost:6379
%dev.quarkus.redis.database=1

# MinIO (en dev)
%dev.quarkus.minio.url=http://localhost:9000
%dev.quarkus.minio.access-key=DEV_MINIO_KEY
%dev.quarkus.minio.secret-key=DEV_MINIO_SECRET
%dev.quarkus.minio.bucket-name=dev-bucket

# Danaya Client (en dev) - exemple
%dev.quarkus.rest-client.danaya-api.url=http://localhost:8082
%dev.quarkus.rest-client.danaya-api.api-key=dev-danaya-key
%dev.quarkus.rest-client.danaya-api.api-secret=dev-danaya-secret
%dev.quarkus.rest-client.danaya-api.scope=jakarta.inject.Singleton
%dev.quarkus.rest-client.danaya-api.initial-delay-seconds=3
%dev.quarkus.rest-client.danaya-api.polling-interval-seconds=5
%dev.quarkus.rest-client.danaya-api.max-polling-attempts=60
%dev.quarkus.rest-client.danaya-api.providers=africa.flot.infrastructure.danaya.DanayaClient

# Jetfy SMS (en dev)
%dev.quarkus.jetfy.api.token=dev-jetfy-token
%dev.quarkus.jetfy.api.sender-id=dev-sender
%dev.quarkus.rest-client.jetfy-api.url=http://localhost:8090
%dev.quarkus.rest-client.jetfy-api.scope=jakarta.enterprise.context.ApplicationScoped

# Fineract (en dev)
%dev.quarkus.fineract.api.url=http://localhost:8888
%dev.quarkus.fineract.api.username=dev_fineract_user
%dev.quarkus.fineract.api.password=dev_fineract_pass

# Fineract API Rest-Client (en dev)
%dev.quarkus.rest-client.fineract-api.url=http://localhost:8888
%dev.quarkus.rest-client.fineract-api.username=dev_fineract_user
%dev.quarkus.rest-client.fineract-api.password=dev_fineract_pass
%dev.quarkus.rest-client.fineract-api.connect-timeout=30000
%dev.quarkus.rest-client.fineract-api.read-timeout=30000
%dev.quarkus.rest-client.fineract-api.max-retries=3
%dev.quarkus.rest-client.fineract-api.retry-interval=1000

# Africa Mobile API (en dev)
%dev.quarkus.rest-client.africa-mobile-api.url=http://localhost:8083
%dev.quarkus.africa.mobile.accountid=dev_africa_account
%dev.quarkus.africa.mobile.password=dev_africa_pass
%dev.quarkus.africa.mobile.sender=dev_sender

#####################################################################
# CONFIGURATION PROD
#####################################################################
%prod.quarkus.log.level=INFO
%prod.quarkus.log.category."io.quarkus.hibernate.reactive".level=DEBUG
%prod.quarkus.log.category."org.hibernate.SQL".level=DEBUG
%prod.quarkus.log.category."org.hibernate.type.descriptor.sql.BasicBinder".level=TRACE
%prod.quarkus.log.category."io.micrometer".level=DEBUG
%prod.quarkus.log.category."org.hibernate".level=WARN

# Redis (en prod)
%prod.quarkus.redis.hosts=${REDIS_HOST}
%prod.quarkus.redis.database=0

# Base de données (en prod)
%prod.quarkus.datasource.reactive.url=vertx-reactive:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}
%prod.quarkus.datasource.username=${DB_USER}
%prod.quarkus.datasource.password=${DB_PASSWORD}
%prod.quarkus.hibernate-orm.packages=africa.flot.domain.model
%prod.quarkus.hibernate-orm.database.generation=update
%prod.quarkus.hibernate-orm.log.sql=false
%prod.quarkus.hibernate-orm.log.bind-parameters=true
%prod.quarkus.hibernate-orm.statistics=true

# MinIO (en prod)
%prod.quarkus.minio.url=${MINIO_URL}
%prod.quarkus.minio.access-key=${MINIO_ACCESS_KEY}
%prod.quarkus.minio.secret-key=${MINIO_SECRET_KEY}
%prod.quarkus.minio.bucket-name=${MINIO_BUCKET_NAME}

# Danaya Client (en prod)
%prod.quarkus.rest-client.danaya-api.url=${DANAYA_API_URL}
%prod.quarkus.rest-client.danaya-api.api-key=${DANAYA_API_KEY}
%prod.quarkus.rest-client.danaya-api.api-secret=${DANAYA_API_SECRET}
%prod.quarkus.rest-client.danaya-api.scope=jakarta.inject.Singleton
%prod.quarkus.rest-client.danaya-api.initial-delay-seconds=3
%prod.quarkus.rest-client.danaya-api.polling-interval-seconds=5
%prod.quarkus.rest-client.danaya-api.max-polling-attempts=60
%prod.quarkus.rest-client.danaya-api.providers=africa.flot.infrastructure.danaya.DanayaClient

# Jetfy SMS (en prod)
%prod.quarkus.jetfy.api.token=${JETFY_API_TOKEN}
%prod.quarkus.jetfy.api.sender-id=${JETFY_API_SENDER_ID}
%prod.quarkus.rest-client.jetfy-api.url=${JETFY_API_URL:https://api.jetfy.net}
%prod.quarkus.rest-client.jetfy-api.scope=jakarta.enterprise.context.ApplicationScoped

# Fineract (en prod)
%prod.quarkus.fineract.api.url=${FINERACT_API_URL}
%prod.quarkus.fineract.api.username=${FINERACT_API_USERNAME}
%prod.quarkus.fineract.api.password=${FINERACT_API_PASSWORD}

# Fineract API Rest-Client (en prod)
%prod.quarkus.rest-client.fineract-api.url=${FINERACT_API_URL}
%prod.quarkus.rest-client.fineract-api.username=${FINERACT_API_USERNAME}
%prod.quarkus.rest-client.fineract-api.password=${FINERACT_API_PASSWORD}
%prod.quarkus.rest-client.fineract-api.connect-timeout=30000
%prod.quarkus.rest-client.fineract-api.read-timeout=30000
%prod.quarkus.rest-client.fineract-api.max-retries=3
%prod.quarkus.rest-client.fineract-api.retry-interval=1000

# Africa Mobile API (en prod)
%prod.quarkus.rest-client.africa-mobile-api.url=${AFRICA_MOBILE_API_URL}
%prod.quarkus.africa.mobile.accountid=${AFRICA_MOBILE_ACCOUNTID}
%prod.quarkus.africa.mobile.password=${AFRICA_MOBILE_PASSWORD}
%prod.quarkus.africa.mobile.sender=${AFRICA_MOBILE_SENDER}
